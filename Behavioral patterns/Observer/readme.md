## üëÄ –ü–∞—Ç—Ç–µ—Ä–Ω Observer –Ω–∞ PHP  
_–ò–∑–¥–∞—Ç–µ–ª—å-–ü–æ–¥–ø–∏—Å—á–∏–∫, –°–ª—É—à–∞—Ç–µ–ª—å, –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å_

![](https://refactoring.guru/images/patterns/content/observer/observer.png)


## üß© –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –∏–º–µ–µ—Ç–µ –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞: **_–ü–æ–∫—É–ø–∞—Ç–µ–ª—å_** –∏ **_–ú–∞–≥–∞–∑–∏–Ω_**. –í –º–∞–≥–∞–∑–∏–Ω –≤–æ—Ç-–≤–æ—Ç –¥–æ–ª–∂–Ω—ã –∑–∞–≤–µ–∑—Ç–∏ –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—é.    

–ü–æ–∫—É–ø–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Ö–æ–¥–∏—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–∞. –ù–æ –ø—Ä–∏ —ç—Ç–æ–º –æ–Ω –±—É–¥–µ—Ç –∑–ª–∏—Ç—å—Å—è, –±–µ–∑ —Ç–æ–ª–∫—É —Ç—Ä–∞—Ç—è —Å–≤–æ—ë –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è.  
![](https://refactoring.guru/images/patterns/content/observer/observer-comic-1-ru.png)
–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ –∏–ª–∏ —Å–ø–∞–º?

–° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –º–∞–≥–∞–∑–∏–Ω –º–æ–∂–µ—Ç —Ä–∞–∑–æ—Å–ª–∞—Ç—å —Å–ø–∞–º –∫–∞–∂–¥–æ–º—É —Å–≤–æ–µ–º—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—é. –ú–Ω–æ–≥–∏—Ö —ç—Ç–æ —Ä–∞—Å—Å—Ç—Ä–æ–∏—Ç, —Ç–∞–∫ –∫–∞–∫ —Ç–æ–≤–∞—Ä —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π, –∏ –Ω–µ –≤—Å–µ–º –æ–Ω –Ω—É–∂–µ–Ω.  

–ü–æ–ª—É—á–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç: –ª–∏–±–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å —Ç—Ä–∞—Ç–∏—Ç –≤—Ä–µ–º—è –Ω–∞ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –ª–∏–±–æ –º–∞–≥–∞–∑–∏–Ω —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è.  

## üì∞ –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏

![](https://refactoring.guru/images/patterns/content/observer/observer-comic-2-ru.png)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≥–∞–∑–µ—Ç—ã –∏ –∏—Ö –¥–æ—Å—Ç–∞–≤–∫–∞.  
–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –æ—Ñ–æ—Ä–º–∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –≥–∞–∑–µ—Ç—É –∏–ª–∏ –∂—É—Ä–Ω–∞–ª, –≤–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –µ–∑–¥–∏—Ç—å –≤ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –Ω–µ –≤—ã—à–µ–ª –ª–∏ –æ—á–µ—Ä–µ–¥–Ω–æ–π –Ω–æ–º–µ—Ä. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –±—É–¥–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –Ω–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞ –ø–æ –ø–æ—á—Ç–µ –ø—Ä—è–º–æ –∫ –≤–∞–º –¥–æ–º–æ–π —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏—Ö –≤—ã—Ö–æ–¥–∞.  
–ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –≤–µ–¥—ë—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ –∑–Ω–∞–µ—Ç, –∫–æ–º—É –∫–∞–∫–æ–π –∂—É—Ä–Ω–∞–ª –≤—ã—Å—ã–ª–∞—Ç—å. –í—ã –º–æ–∂–µ—Ç–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –ø–æ–¥–ø–∏—Å–∫–∏, –∏ –∂—É—Ä–Ω–∞–ª –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—å.  

## üß† –û–ø–∏—Å–∞–Ω–∏–µ

–ü–∞—Ç—Ç–µ—Ä–Ω **Observer** (**–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å**) ‚Äî —ç—Ç–æ **–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π** –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç–∞–º –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–ª–∞–±—É—é —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ —è–≤–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

## ‚ö° –í –¥–≤—É—Ö —Å–ª–æ–≤–∞—Ö
–ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ PHP

- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Observer`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
```php
<?php

interface Observer
{
    public function update(string $message): void;
}
```

- ‚úÖ –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å `ConcreteObserver`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è:
```php
<?php

class ConcreteObserver implements Observer
{
    private $name;

    public function __construct(string $name)
    {
        $this->name = $name;
    }

    public function update(string $message): void
    {
        echo "$this->name received message: $message\n";
    }
}
```

- ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å `Subject`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å—É–±—ä–µ–∫—Ç (–æ–±—ä–µ–∫—Ç, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º –Ω–∞–±–ª—é–¥–∞—é—Ç):
```php
<?php

class Subject
{
    private $observers = [];

    public function addObserver(Observer $observer): void
    {
        $this->observers[] = $observer;
    }

    public function removeObserver(Observer $observer): void
    {
        $index = array_search($observer, $this->observers);
        if ($index !== false) {
            unset($this->observers[$index]);
        }
    }

    public function notifyObservers(string $message): void
    {
        foreach ($this->observers as $observer) {
            $observer->update($message);
        }
    }
}
```

- ‚úÖ –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Observer –¥–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```php
<?php

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
$subject = new Subject();

$observerA = new ConcreteObserver("Observer A");
$observerB = new ConcreteObserver("Observer B");

$subject->addObserver($observerA);
$subject->addObserver($observerB);

$subject->notifyObservers("Hello!"); 
// Output: Observer A received message: Hello!
// Output: Observer B received message: Hello!

$subject->removeObserver($observerB);

$subject->notifyObservers("Goodbye!");
// Output: Observer A received message: Goodbye!
```

## üß© –ü—Ä–∏–º–µ—Ä –∏–∑ Design Patterns for Humans
_–°–æ–∏—Å–∫–∞—Ç–µ–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏–∏._

```php
<?php

$john = new JobSeeker('John');
$jane = new JobSeeker('Jane');

$jobPostings = new JobPostings();
$jobPostings->attach($john);
$jobPostings->attach($jane);

$jobPostings->addJob(new JobPost('Software Engineer'));
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç–∞–º —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –±–µ–∑ —è–≤–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
- –£–ª—É—á—à–∞–µ—Ç —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞.
- –ò–∑–¥–∞—Ç–µ–ª–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.
- –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –∏ –æ—Ç–ø–∏—Å—ã–≤–∞—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –Ω–∞ –ª–µ—Ç—É. 
- –†–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏.

## ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º –ø–∞–º—è—Ç–∏.
- –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –æ–ø–æ–≤–µ—â–∞—é—Ç—Å—è –≤ —Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
