## üîÅ –ü–∞—Ç—Ç–µ—Ä–Ω Iterator –Ω–∞ PHP  
_–ò—Ç–µ—Ä–∞—Ç–æ—Ä_

![](https://refactoring.guru/images/patterns/content/iterator/iterator-en.png)

_–ò–¥–µ—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –ò—Ç–µ—Ä–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤—ã–Ω–µ—Å—Ç–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–±—Ö–æ–¥–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–∑ —Å–∞–º–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å._  

## üß≠ –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏
_–í–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–≥—É–ª–æ–∫ –ø–æ –†–∏–º—É._
![](https://refactoring.guru/images/patterns/content/iterator/iterator-comic-1-ru.png)

–í—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–ª–µ—Ç–µ—Ç—å –≤ –†–∏–º –∏ –æ–±–æ–π—Ç–∏ –≤—Å–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ –ø–∞—Ä—É –¥–Ω–µ–π. –ù–æ –ø—Ä–∏–µ—Ö–∞–≤, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–ª–≥–æ –ø–µ—Ç–ª—è—Ç—å —É–∑–∫–∏–º–∏ —É–ª–æ—á–∫–∞–º–∏, –ø—ã—Ç–∞—è—Å—å –Ω–∞–π—Ç–∏ –ö–æ–ª–∏–∑–µ–π.  

–ï—Å–ª–∏ —É –≤–∞—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç ‚Äî –Ω–µ –±–µ–¥–∞. –í—ã –º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –≥–∏–¥–æ–º, —Å–∫–∞—á–∞–Ω–Ω—ã–º –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –≤–∞–º —Ç–æ—á–∫–∏. –ê –º–æ–∂–µ—Ç–µ –ø–ª—é–Ω—É—Ç—å –∏ –Ω–∞–Ω—è—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≥–∏–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç—å –∏ –æ–±–æ–π–¥—ë—Ç—Å—è –≤ –∫–æ–ø–µ–µ—á–∫—É, –Ω–æ –∑–Ω–∞–µ—Ç –≥–æ—Ä–æ–¥ –∫–∞–∫ —Å–≤–æ–∏ –ø—è—Ç—å –ø–∞–ª—å—Ü–µ–≤, –∏ —Å–º–æ–∂–µ—Ç –ø–æ—Å–≤—è—Ç–∏—Ç—å –≤–∞—Å –≤–æ –≤—Å–µ –≥–æ—Ä–æ–¥—Å–∫–∏–µ –ª–µ–≥–µ–Ω–¥—ã.  

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –†–∏–º –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π, –∞ –≤–∞—à –º–æ–∑–≥, –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä –∏–ª–∏ –≥–∏–¥ ‚Äî –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–º –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –í—ã, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥, –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤, –æ—Ç—Ç–∞–ª–∫–∏–≤–∞—è—Å—å –æ—Ç —Ä–µ—à–∞–µ–º–æ–π –∑–∞–¥–∞—á–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.  


## üéØ –ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å
- **–°–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –¥–µ—Ç–∞–ª–∏ –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ —Å–∫—Ä—ã—Ç—å.** –ò—Ç–µ—Ä–∞—Ç–æ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –ø–µ—Ä–µ–±–æ—Ä–∞ –∏ –∑–∞—â–∏—â–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é –æ—Ç –Ω–µ–æ—Å—Ç–æ—Ä–æ–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.
- **–ù—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—Ö–æ–¥–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.** –ö–æ–¥ –æ–±—Ö–æ–¥–∞ –≤—ã–Ω–æ—Å–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã, –Ω–µ –∑–∞—Ö–ª–∞–º–ª—è—è –∫–ª–∞—Å—Å—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π.
- **–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π.** –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã.

## üß† –û–ø–∏—Å–∞–Ω–∏–µ

–ü–∞—Ç—Ç–µ—Ä–Ω **Iterator** (**–ò—Ç–µ—Ä–∞—Ç–æ—Ä**) ‚Äî —ç—Ç–æ **–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π** –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç—É–ø–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –±–µ–∑ –∑–Ω–∞–Ω–∏—è –æ –µ—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ PHP

### 1) –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Iterator` –¥–ª—è –ø–µ—Ä–µ–±–æ—Ä–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```php
<?php

interface Iterator
{
    public function hasNext(): bool;
    public function next();
}
```

### 2) –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å `ConcreteIterator`
```php
<?php

class ConcreteIterator implements Iterator
{
    private $collection;
    private $position = 0;

    public function __construct(array $collection)
    {
        $this->collection = $collection;
    }

    public function hasNext(): bool
    {
        return $this->position < count($this->collection);
    }

    public function next()
    {
        if ($this->hasNext()) {
            $item = $this->collection[$this->position];
            $this->position++;

            return $item;
        }

        return null;
    }
}
```

### 3) –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å `Aggregate`, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä

```php
<?php

class Aggregate
{
    private $collection = [];

    public function addItem($item): void
    {
        $this->collection[] = $item;
    }

    public function getIterator(): Iterator
    {
        return new ConcreteIterator($this->collection);
    }
}
```

### 4) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
```php
<?php

$aggregate = new Aggregate();
$aggregate->addItem("Item 1");
$aggregate->addItem("Item 2");
$aggregate->addItem("Item 3");

$iterator = $aggregate->getIterator();

while ($iterator->hasNext()) {
    echo $iterator->next() . "\n";
}
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –µ—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
- –£–ø—Ä–æ—â–∞–µ—Ç –∫–ª–∞—Å—Å—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
- –£–ª—É—á—à–∞–µ—Ç –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–±—Ö–æ–¥–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.

## ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞.
- –ù–µ –æ–ø—Ä–∞–≤–¥–∞–Ω, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –ø—Ä–æ—Å—Ç—ã–º —Ü–∏–∫–ª–æ–º.
