## üèä –ü–∞—Ç—Ç–µ—Ä–Ω Pool –Ω–∞ PHP  
_–ë–∞—Å—Å–µ–π–Ω_

## üß† –û–ø–∏—Å–∞–Ω–∏–µ
–ü–∞—Ç—Ç–µ—Ä–Ω Pool (–ë–∞—Å—Å–µ–π–Ω) ‚Äî —ç—Ç–æ **–ø–æ—Ä–æ–∂–¥–∞—é—â–∏–π** –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–ª –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ –ø—É–ª–∞. –≠—Ç–æ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
–í—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –¥–≤–∞ –º–∞—Å—Å–∏–≤–∞, –≥–¥–µ –≤ –æ–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç—ã –±—É–¥—É—Ç —Å–≤–æ–±–æ–¥–Ω—ã, –∞ –¥—Ä—É–≥–∏–µ –±—É–¥—É—Ç –∑–∞–Ω—è—Ç—ã. –ù–µ –≤–∞–∂–Ω–æ, –±—É–¥—É—Ç —ç—Ç–æ —Ä–∞–±–æ—á–∏–µ –∏–ª–∏ —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ. –ò –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É–¥—É—Ç —Ç—É–¥–∞-—Å—é–¥–∞ —Ö–æ–¥–∏—Ç—å.

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ PHP

- ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å `ObjectPool`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–ª –æ–±—ä–µ–∫—Ç–æ–≤:
```php
<?php

class ObjectPool
{
    private $available = [];
    private $inUse = [];

    public function addObject($object): void
    {
        $key = spl_object_hash($object);
        $this->available[$key] = $object;
    }

    public function getObject(): ?object
    {
        if (empty($this->available)) {
            return null;
        }

        $object = array_pop($this->available);
        $this->inUse[spl_object_hash($object)] = $object;
        return $object;
    }

    public function releaseObject($object): void
    {
        $key = spl_object_hash($object);
        if (isset($this->inUse[$key])) {
            unset($this->inUse[$key]);
            $this->available[$key] = $object;
        }
    }
}
```

- ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å `ReusableObject`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø—É–ª–µ:
```php
<?php

class ReusableObject
{
    private $data;

    public function __construct($data)
    {
        $this->data = $data;
    }

    public function getData(): string
    {
        return $this->data;
    }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Pool –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤:
```php
<?php

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
$pool = new ObjectPool();

// –°–æ–∑–¥–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö –≤ –ø—É–ª
$object1 = new ReusableObject("Object 1");
$object2 = new ReusableObject("Object 2");
$pool->addObject($object1);
$pool->addObject($object2);

// –ü–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –∏–∑ –ø—É–ª–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö
$objectA = $pool->getObject();
$objectB = $pool->getObject();
echo $objectA->getData() . PHP_EOL; // Output: Object 2
echo $objectB->getData() . PHP_EOL; // Output: Object 1

// –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—É–ª
$pool->releaseObject($objectA);
$pool->releaseObject($objectB);
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤.
- –£–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∏–∑–±–µ–≥–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –ø–∞–º—è—Ç—å—é.

## ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ï—Å–ª–∏ –ø—É–ª –æ–±—ä–µ–∫—Ç–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–Ω—É–∂–Ω–æ–º—É –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –ø–∞–º—è—Ç–∏.
- –ù–µ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —É –Ω–∏—Ö –µ—Å—Ç—å —Å–ª–æ–∂–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
